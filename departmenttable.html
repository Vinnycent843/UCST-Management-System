<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Departments Overview ‚Äî JNNP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family: Georgia, 'Times New Roman', Times, serif;
    background:#f9f9f9;
    margin:0;
    padding:20px;
    transition: background 0.3s, color 0.3s;
    color:#000;
  }
  h1 { text-align:center; margin-bottom:20px; color:#023e8a; }
  table { width:100%; border-collapse:collapse; background:#fff; box-shadow:0 4px 10px rgba(0,0,0,0.1); margin-bottom:20px; }
  th, td { padding:12px; border:1px solid #ddd; text-align:left; }
  th { background:#0077b6; color:#fff; }
  tr:nth-child(even) { background:#f2f2f2; }

  /* Search input */
  #searchInput { width:100%; padding:10px; font-size:16px; margin-bottom:20px; border-radius:4px; border:1px solid #ccc; max-width:400px; }

  /* Dark mode toggle */
  #darkModeBtn { cursor:pointer; font-size:20px; margin-left:10px; }

  /* Dark mode styles */
  body.dark-mode { background:#212529; color:#f8f9fa; }
  body.dark-mode table { background:#2c2c2c; color:#f8f9fa; }
  body.dark-mode th { background:#343a40; color:#f8f9fa; }
  body.dark-mode td { border-color:#555; }
  body.dark-mode tr:nth-child(even) { background:#3a3a3a; }

  /* Responsive */
  @media(max-width:768px) { th, td { padding:8px; font-size:14px; } }
</style>
</head>
<body>

<h1>üèõÔ∏è Departments Overview</h1>

<div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
  <input type="text" id="searchInput" placeholder="Search departments...">
  <span id="darkModeBtn">üåô</span>
</div>

<table id="departmentsTable">
  <thead>
    <tr>
      <th>Department</th>
      <th>HOD</th>
      <th>Courses</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAQZ1_Grh00sFgOp8pxkKff10sMFSw9xlc",
  authDomain: "jnnp-system.firebaseapp.com",
  databaseURL: "https://jnnp-system-default-rtdb.firebaseio.com",
  projectId: "jnnp-system",
  storageBucket: "jnnp-system.firebasestorage.app",
  messagingSenderId: "769232855377",
  appId: "1:769232855377:web:e3ba51e3e25cc24735f370"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const tableBody = document.querySelector("#departmentsTable tbody");
const searchInput = document.getElementById("searchInput");

// Fetch and render table in real-time
function loadDepartments() {
  db.ref("departments").on("value", snapshot => {
    const data = snapshot.val() || {};
    renderTable(data);
  });
}

function renderTable(data) {
  tableBody.innerHTML = "";
  Object.keys(data).forEach(depName => {
    const dep = data[depName];
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${depName}</td>
      <td>${dep.hod || "-"}</td>
      <td>${dep.courses.join(", ")}</td>
    `;
    tableBody.appendChild(tr);
  });
}

// Search filter
searchInput.addEventListener("input", () => {
  const query = searchInput.value.toLowerCase();
  Array.from(tableBody.rows).forEach(row => {
    row.style.display = Array.from(row.cells).some(td => td.textContent.toLowerCase().includes(query)) ? "" : "none";
  });
});

// Dark/light toggle
const darkBtn = document.getElementById("darkModeBtn");
darkBtn.addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");
  darkBtn.textContent = document.body.classList.contains("dark-mode") ? "‚òÄÔ∏è" : "üåô";
});

loadDepartments();
</script>

</body>
</html>
